#!/usr/bin/perl -w

use strict;

use FindBin;
use lib ("$FindBin::RealBin/..",
	 "$FindBin::RealBin/../lib",
	);
use Getopt::Long;
use Strassen::Core;
use Strassen::GeoJSON;

sub usage {
    die <<EOF;
usage: $0 [-compact] bbdfile
EOF
}

my $compact;
GetOptions("compact!" => \$compact) or usage();

my $file = shift || usage();
my $s = Strassen->new($file);
my $s_geojson = Strassen::GeoJSON->new($s);
print $s_geojson->bbd2geojson(pretty => !$compact, utf8 => $compact);
