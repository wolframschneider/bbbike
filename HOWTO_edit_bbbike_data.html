<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>HOWTO - Daten in BBBike editieren</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.73 " />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body class="ARTICLE" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="ARTICLE">
<div class="TITLEPAGE">
<h1 class="TITLE"><a id="AEN2" name="AEN2">HOWTO - Daten in BBBike editieren</a></h1>

<div class="AUTHORGROUP"><a id="AEN4" name="AEN4"></a>
<h3 class="AUTHOR"><a id="AEN5" name="AEN5">Slaven Rezic</a></h3>

<div class="AFFILIATION">
<div class="ADDRESS">
<p class="ADDRESS">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slaven@rezic.de<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
</div>
</div>
</div>

<p class="COPYRIGHT">Copyright &copy; 2005 by Slaven Rezic</p>

<p class="PUBDATE">$Date: 2003/04/26 12:11:28 $<br />
</p>

<hr />
</div>

<div class="SECT1">
<h1 class="SECT1"><a id="AEN15" name="AEN15">1. Voraussetzungen</a></h1>

<div class="SECT2">
<h2 class="SECT2"><a id="AEN17" name="AEN17">1.1. Betriebssystem</a></h2>

<p>Empfehlenswert ist ein POSIX-kompatibles System, also Linux oder Unix.</p>

<p>Bei Windows könnte es helfen, wenn <a href="http://www.cygwin.com"
target="_top">cygwin</a> installiert ist (die Basis-Installation von cygwin zusammen mit
<tt class="COMMAND">cvs</tt> dürfte ausreichen). Die Umgebungsvariable <tt
class="ENVAR">PATH</tt> sollte um den bin-Pfad von cygwin ergänzt werden (üblicherweise
<tt class="FILENAME">C:\cygwin\bin</tt>), falls das nicht automatisch bei der
cygwin-Installation gemacht wird.</p>
</div>

<div class="SECT2">
<hr />
<h2 class="SECT2"><a id="AEN25" name="AEN25">1.2. CVS</a></h2>

<p>Ein CVS-Checkout von BBBike ist notwendig, um die neuesten Daten sowie die aktuellsten
Entwicklungstools zu erhalten. Eine Anleitung für das CVS-Checkout befindet sich unter <a
href="REAMDE.html#Entwicklung" target="_top">Entwicklung im README</a>. Windows-Benutzer
sollten das Verzeichnis aus dem CVS-Checkout an die Stelle des originalen
BBBike-Programmverzeichnisses verschieben, also üblicherweise <tt
class="FILENAME">C:\Programme\BBBike\bbbike\</tt>.</p>
</div>
</div>

<div class="SECT1">
<hr />
<h1 class="SECT1"><a id="AEN30" name="AEN30">2. BBBike starten</a></h1>

<p>BBBike sollte mit der Option <tt class="COMMAND">-advanced</tt> gestartet werden ---
entweder in der Kommandozeile angeben oder in den Option unter "Advanced" den Knopf
"advanced" anklicken. Nach dem Ändern der Option ist ein Neustart erforderlich. Mit der
Option <tt class="COMMAND">-advanced</tt> erhält man u.a. neue Menüs, die bei der
Datenerfassung helfen.</p>
</div>

<div class="SECT1">
<hr />
<h1 class="SECT1"><a id="AEN35" name="AEN35">3. Editiermodus</a></h1>

<p>Einschalten des EDIT-Modus durch Klick auf den EDIT-Button unten rechts. Zurzeit muss
man mit einer Fehlermeldung rechnen, die ignoriert werden kann. Die Layer werden neu
geladen und zeigen jetzt auch Punkte für jeden Kreuzungs- und Kurvenpunkt an.</p>
</div>

<div class="SECT1">
<hr />
<h1 class="SECT1"><a id="AEN38" name="AEN38">4. Straßen-Editor</a></h1>

<p>Mit Klick auf das Menü Bearbeiten &#62; Straßen-Editor wird ein Fenster mit einigen
Editieroption geöffnet.</p>

<div class="SECT2">
<hr />
<h2 class="SECT2"><a id="AEN41" name="AEN41">4.1. Neue Straßen hinzufügen</a></h2>

<p>Durch Klicken auf die Karte kann ein Straßenzug zusammengestellt werden. Für nicht
bestehende Punkte muss man gleichzeitig die Shift-Taste gedrückt halten. Bei bereits
bestehenden Punkten (also Kreuzungspunkten) darf die Shift-Taste nicht verwendet werden.
Kreuzt eine neue Straße eine bestehende Straße, ohne dass bereits ein Kreuzungspunkt
existiert, muss zuerst ein neuer Kurvenpunkt im bestehenden Straßenzug erzeugt werden
(siehe <a href="#INSERTPOINT">Punkt einfügen</a>). Falls es sich bei der Kreuzung um eine
Brücke handelt, darf kein gemeinsamer Punkt erzeugt werden. Stattdessen sollte ein
informeller Eintrag in der Datei <tt class="FILENAME">brunnels</tt> erzeugt
werden.&#13;</p>

<p>Nachdem die neue Straße zusammengestellt wurde, muss sie per "Add new to:" zu einer
Datei, normalerweise <tt class="FILENAME">strassen</tt> (in Berlin), <tt
class="FILENAME">landstrassen</tt> (im näheren Umland von Berlin) oder <tt
class="FILENAME">landstrassen2</tt> (im entfernteren Umland von Berlin und außerhalb von
Brandenburg) hinzugefügt werden. Im nachfolgenden Dialog wird der Straßenname und die
Kategorie eingetragen, die Koordinaten des Straßenzugs sind bereits eingetragen.</p>

<div class="SECT3">
<hr />
<h3 class="SECT3"><a id="AEN50" name="AEN50">4.1.1. Regeln bei Straßennamen</a></h3>

<p>In Berlin (<tt class="FILENAME">strassen</tt>) werden nur "offizielle" Straßennamen
verwendet. Offizielle Straßennamen sind in der Datei <tt
class="FILENAME">Berlin.coords.data</tt> aufgelistet.&#13;</p>

<p>Es kann aber durchaus sein, dass in dieser Datei Straßen fehlen. In diesem Fall muss
die Straße mit Bezirks-/Ortsteilsname (nicht die neuen Superbezirksnamen verwenden!),
Postleitzahl und einem exemplarischen Punkt eingetragen werden. "...straße" wird immer
als "...str." abgekürzt. Straßen, die durch mehrere Ortsteile und/oder
Postleitzahlgebiete führen, müssen dementsprechende viele Einträge erhalten.&#13;</p>

<p>Wenn eine Straße in mehreren Bezirken vorhanden ist, muß der Bezirk im Klammern
dahinter stehen. Beispiele:</p>

<pre class="PROGRAMLISTING">
    Methfesselstr.
    Kurfürstenstr. (Schöneberg)
    Heerstr. (Spandau, Charlottenburg)
</pre>

&#13;<br />
<br />
<p>Wenn es sich innerhalb Berlins um eine "inoffizielle" Straße handelt, muss die Straße
in Klammern gesetzt werden. Das können Wege in Parks sein oder namenslose Verbindungen.
Beispiele:</p>

<pre class="PROGRAMLISTING">
    (Parkweg im Volkspark Friedrichshain)
    (zur Eisenbahnbrücke)
</pre>

&#13;<br />
<br />
<p>Bei Verbindungsbezeichnungen sollte ein Bindestrich verwendet werden und die beiden
Punkte in der richtigen Reihenfolge (genau wie der Straßenzug erzeugt wurde) angegeben
werden. Beispiel:</p>

<pre class="PROGRAMLISTING">
    (Bahndamm - Elsenstr.)
</pre>

&#13;<br />
<br />
<p>Ob die richtige Reihenfolge gewählt wurde, kann später beim Routing überprüft werden.
Je nach Richtung sollte in der Routenliste</p>

<pre class="PROGRAMLISTING">
    (Elsenstr. -) Bahndamm
    (Bahndamm -) Elsenstr.
</pre>

erscheinen.&#13;<br />
<br />
<p>In den Landstraßendateien sollten die Straßennamen möglichst so gewählt werden, dass
sie in der Realität bestehenden Wegweisern entsprechen. Ist das nicht bekannt, nimmt man
die benachbarten Orte. Eine Straßennummerierung wird vorangestellt oder in Klammern
angefügt. Zurzeit werden nur Bundesstraßen bei der Straßennummerierung verwendet.
Beispiele:</p>

<pre class="PROGRAMLISTING">
    B1: Potsdam - Brandenburg
    Müncheberg - Prötzel (B168)
    Prenzlau - Penkun
            ^ ^ Hier muss immer ein Leerzeichen stehen!
    Strausberg-Nord - Altlandsberg
              ^ Bei zusammengesetzten Ortsnamen darf kein
                Leerzeichen stehen!
</pre>

&#13;<br />
<br />
<p>Nach dem Einfügen der Straße ist diese nicht sofort sichtbar, sondern die Straße muss
mit "Reload" neu geladen werden. Achtung: manchmal funktioniert "Reload" nicht, dann muss
der Layer aus- und wieder eingeschaltet werden. Tipp: um das Laden zu beschleunigen kann
im Layermenu "Lazy drawing" verwendet werden. Achtung: "Lazy drawing" führt zu einem
Speicherleck, der zu einem stetigen Speicherzuwachs in BBBike führt.</p>
</div>
</div>

<div class="SECT2">
<hr />
<h2 class="SECT2"><a id="AEN67" name="AEN67">4.2. Attribute zu einer Straße
hinzufügen</a></h2>

<p>Nach dem Reload ist die neue Straße sichtbar. Man kann sich wieder den Straßenzug
zusammenklicken (den ganzen Teil oder nur einen Teil davon) und diesen Straßenzug mit
"Add to new" zu einer Attributdatei hinzufügen. Hier muss darauf geachtet werden, dass
alle Punkte auf bestehenden Kurvenpunkten liegen (Shift-Maustaste ist hier verboten) und
dass kein Punkt vergessen oder doppelte angeklickt wurden.<a id="AEN70" name="AEN70"
href="#FTN.AEN70">[1]</a>&#13;</p>

<p>Mögliche Attribute sind Fahrbahnqualität (<tt class="FILENAME">qualitaet_s</tt> für
Berliner, <tt class="FILENAME">qualitaet_l</tt> für Nicht-Berliner Straßen), sonstige
Beeinträchtigungen (<tt class="FILENAME">handicap_s</tt> für Berliner, <tt
class="FILENAME">handicap_l</tt> für Nicht-Berliner Straßen), Radwege (<tt
class="FILENAME">radwege</tt> für Berlin, <tt class="FILENAME">comments_cyclepath</tt>
außerhalb Berlins) usw. Eine Liste der Attributierungsdateien befindet sich in <a
href="bbd.html" target="_top">der Dokumentation zum bbd-Format</a>. Hier sind auch die
verwendeten Kategorien beschrieben.</p>
</div>

<div class="SECT2">
<hr />
<h2 class="SECT2"><a id="AEN80" name="AEN80">4.3. Die orig-Dateien konvertieren</a></h2>

<p>Die im Edit-Modus bearbeiteten Dateien sind die Dateien im Verzeichnis <tt
class="FILENAME">data</tt> mit der Endung <tt class="FILENAME">-orig</tt>. BBBike im
Normalmodus verwendet die Dateien ohne die Endung <tt class="FILENAME">-orig</tt>. Die
Konvertierung wird vom Makefile im Verzeichnis data vorgenommen. Das Makefile
funktioniert nur mit einem modernen BSD-make. Alle Nicht-BSD-Systeme (auch Linux)
benötigen dieses make, dass bei <a href="http://www.sourceforge.net/projects/srezic"
target="_top">Sourceforge</a> als "pmake" im Quellcode erhältlich ist. Eine
Windows-Binary existiert noch nicht.&#13;</p>

<p>Mit <tt class="COMMAND">make</tt> im <tt class="FILENAME">data</tt>-Verzeichnis wird
eine Konvertierung vorgenommen und, wichtiger, eine Reihe von Konsistenzchecks
durchgeführt. So müssen beispielsweise alle Straßen in <tt class="FILENAME">strassen</tt>
auch in <tt class="FILENAME">Berlin.coords.data</tt> aufgeführt sein (siehe auch <a
href="#OFFICIALSTREETNAMES">oben</a>), <tt class="FILENAME">Berlin.coords.data</tt> muss
sortiert sein, alle Ampeln müssen sich auf Kurvenpunkten existieren, alle Attributedaten
müssen auf bestehenden Straßenzügen liegen usw.&#13;</p>
</div>
</div>

<div class="SECT1">
<hr />
<h1 class="SECT1"><a id="AEN94" name="AEN94">5. Veröffentlichen der Ergänzungen</a></h1>

<p>Bei der Verwendung des Straßen-Editors wird eine Logdatei in <tt
class="FILENAME">data/datachange.log</tt> geschrieben. Diese Datei sollte an den <a
href="mailto:slaven@rezic.de" target="_top">Maintainer der BBBike-Stammdaten</a>
geschickt werden. In der Datei ist auch jeweils ein Zeitstempel pro Tag enthalten; es
reicht aus, wenn nur die neuesten Änderungen abgeschickt werden. Zugleich sollte ein diff
geschickt werden. Dieses wird mit <tt class="COMMAND">cvs diff -u data &#62;
data.diff</tt> aus dem ausgecheckten BBBike-Verzeichnis heraus gemacht. Die diff-Datei
namens <tt class="FILENAME">data.diff</tt> sollte dann ebenfalls an den Maintainer
geschickt werden.&#13;</p>
</div>

<div class="SECT1">
<hr />
<h1 class="SECT1"><a id="AEN101" name="AEN101">6. Nach dem Veröffentlichen</a></h1>

<p>Es ist empfehlenswert, das Verzeichnis <tt class="FILENAME">data</tt> nach dem
Veröffentlichen umzubenennen (oder zu löschen) und das alte Verzeichnis mit <tt
class="COMMAND">cvs update -d</tt> wiederherzustellen. Der Grund sind mögliche
CVS-Konflikte, die auftreten können, nachdem der Maintainer die editierten Daten ins CVS
eingepflegt hat.&#13;</p>
</div>

<div class="SECT1">
<hr />
<h1 class="SECT1"><a id="AEN106" name="AEN106">7. Eine komplett neue Datenbank
aufbauen</a></h1>

<div class="SECT2">
<h2 class="SECT2"><a id="INSERTPOINT" name="INSERTPOINT">7.1. Punkt hinzufügen</a></h2>

<p></p>
</div>
</div>
</div>

<h3 class="FOOTNOTES">Notes</h3>

<table border="0" class="FOOTNOTES" width="100%">
<tr>
<td align="LEFT" valign="TOP" width="5%"><a id="FTN.AEN70" name="FTN.AEN70"
href="#AEN70">[1]</a></td>
<td align="LEFT" valign="TOP" width="95%">
<p>Eine weitere Möglichkeit der Punktauswahl wäre eine normale Suche (dazu in den
Suchmodus gehen), aber dazu muss Suche &#62; Straßennetz neu berechnen ausgewählt werden,
falls eine neue Straße attributiert werden soll</p>
</td>
</tr>
</table>

<hr />
</body>
</html>

