#!/bin/sh

prefix=$1
city=$2

if test -z "$prefix" -o -z "$city"; then
	echo "usage $0 prefix city"
	exit 2
fi

p=`pwd`/world/bin

perl ./miscsrc/osm2bbd-postprocess --debug=0 -only-largest-city-is-center -skip-inaccessible-streets $prefix/$city

cd $prefix/$city || exit 2

$p/strasse-str strassen
#$p/berlin-coords-data < strassen > Berlin.coords.data
cat /dev/null > Berlin.coords.data

perl $p/opensearch-suggestion --gps=0 < strassen > opensearch.streetnames

# green ways
# perl -npe 's/^\s/XYZ\t/; s/RW1/green2/g' radwege_exact > green 

for i in Berlin.coords.data Potsdam.coords.data comments_mount flaechen green nolighting plaetze qualitaet_s rbahn rbahnhof sbahn sbahnhof strassen ubahn ubahnhof wasserstrassen `find . -type f -size 0`
do

	if ! [ -s $i ]; then

cat << EOF > $i
#: #: -*- coding: utf-8 -*-
#:encoding: utf-8
#:map: polar
#:date: 20090717225331
#:
EOF
	fi
done


rm -f _* *.bak

