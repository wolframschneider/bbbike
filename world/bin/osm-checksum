#!/bin/sh
# Copyright (c) 2012 Wolfram Schneider, http://bbbike.org
#
# osm2garmin - convert a osm/pbf file to garmin
#

PATH=/bin:/sbin:/usr/bin; export PATH
set -e

: ${OSM_CHECKSUM=true}

usage () {
   echo "$@"
   echo "usage file"
   exit 1
}

$OSM_CHECKSUM || exit 0

file="$1"
test -e "$file" || usage "file $file does not exists"
: ${enable_sha=true}

dirname=$(dirname $file)
basename=$(basename $file)
cd $dirname

md5sum=`which md5 md5sum false | head -n 1`
: ${SHA="shasum -a 256"}

$md5sum $basename > $file.md5
if $enable_sha; then
   $SHA $basename > $file.sha256
fi

