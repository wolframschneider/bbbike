[% BLOCK text_default %]
 [%- IF data.${inputname}.defined %]value="[% data.${inputname} | html %]"[% END -%]
[% END -%]
[% BLOCK radio_checked %]
 [%- IF data.${inputname} == val %]checked[% END %]
[% END -%]
[% BLOCK range %]
    <td>
      [%- inputname = "${cat}range_1" -%]
     <label>
      <input type="radio" name="[% inputname %]" value="whole"
       [%- IF !data.${inputname}.defined || data.${inputname} == "whole" %]checked[% END %] />
      gesamte Straﬂe
     </label><br />
     <label>
      <input type="radio" name="[% inputname %]" value="part" [% INCLUDE radio_checked val="part" %] />
      Teilabschnitt
     </label><br />
     <table cellpadding="0" cellspacing="0">
      <tr>
       [%- inputname = "${cat}rangefrom_1" -%]
       <td style="padding-right:1ex;">von</td>
       <td><input name="[% inputname %]" [% INCLUDE text_default %]/></td>
      </tr>
      <tr>
       [%- inputname = "${cat}rangeto_1" -%]
       <td style="padding-right:1ex;">bis </td>
       <td><input name="[% inputname %]" [% INCLUDE text_default %]/></td>
      </tr>
     </table>
    </td>
[% END -%]
[% BLOCK colhead %]
      <tr><td colspan="2"><b>[% text | html %]</b></td></tr>
[% END -%]
[% BLOCK radiocell %]
      <tr>
       [%- inputname = "${cat}${type}_1" -%]
       [%- radioid   = inputname _ "_" _  val -%]
       <td>
        <input id="[% radioid | html %]" style="margin-right:1em;" type="radio" name="[% inputname %]" value="[% val | html %]"
        [%- INCLUDE radio_checked %] /></td>
       <td><label for="[% radioid | html %]">[% IF text %][% text | html_line_break %][% ELSE %][% val | html_line_break %][% END %]</label>
[% IF entryname %]<input name="[% entryname %]_1" [% INCLUDE text_default inputname=entryname _ "_1" %] />[% END %]
       </td>
      </tr>
[% END -%]
[% IF !cgidir %][% cgidir = "../cgi" %][% END -%]
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <!-- -*-html-*- -->
<!-- DO NOT EDIT, generated automatically from newstreetform.tpl.html -->
<html>
 <head>
 <title>Neue Straﬂe f¸r BBBike</title>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
 <link rev="made" href="mailto:slaven@rezic.de" />
 <link rel="stylesheet" type="text/css" href="bbbike.css" />
 <script>
function check() {
  if (!check_strname()) return false;
  return true;
}
function check_strname() {
  var frm = document.forms.newstreet;
[% IF !is_fragezeichen_form -%]
  if (frm.elements.strname.value == "") {
    alert("Der Straﬂenname darf nicht leer sein!");
    return false;
  }
[% END -%]
  return true;
}
function init() {
  var frm = document.forms.newstreet;

  var strname_html;
  if (location.search) {
    var search = unescape(location.search);
    if (search.match(/strname=([^;&]*)/)) {
      frm.supplied_strname.value = RegExp.$1;
    }
    if (search.match(/bezirk=([^;&]*)/)) {
      frm.supplied_bezirk.value = RegExp.$1;
    }
    if (search.match(/plz=([^;&]*)/)) {
      frm.supplied_plz.value = RegExp.$1;
    }
    if (search.match(/strname_html=([^;&]*)/)) {
      strname_html = RegExp.$1;
    }
  }

[% IF !data -%]
  if (document.cookie) {
    var cookies = document.cookie.split(/;\s*/);
    for (var i=0; i<cookies.length; i++) {
      if (cookies[i].match(/^mapserver_comment=(.*)/)) {
        var arr = RegExp.$1.split("&");
        for(var i=0; i<arr.length/2; i++) {
          var key = arr[i*2];
	  var val = arr[i*2+1];
  	  if (key == "email" || key == "author") {
	    frm.elements[key].value = val;
	  }
  	}
	break;
      }
    }
  }
[% END -%]

[% IF is_fragezeichen_form -%]
  if (typeof strname_html != "undefined" && strname_html != "" && typeof document.getElementById == "function") {
    var node = document.getElementById("fragezeichen_text");
    if (node) {
      node.innerHTML = strname_html;
    }
  }
[% END -%]

  if (typeof window.focus == "function") {
    window.focus();
  }
}
 </script>
</head>
<body onload="init()">
[% IF is_fragezeichen_form -%]
 <h1>Kommentar zur Straﬂe</h1>
[% ELSE -%]
 <h1>Neue Straﬂe f¸r BBBike</h1>
[% END -%]
 <form name="newstreet" method="post" action="[% cgidir | html %]/mapserver_comment.cgi">
  <input type="hidden" name="formtype" value="[% IF is_fragezeichen_form %]fragezeichenform[% ELSE %]newstreetform[% END %]" />
  <input type="hidden" name="supplied_strname" value="" />
  <input type="hidden" name="supplied_bezirk" value="" />
  <input type="hidden" name="supplied_plz" value="" />
  <table>

[% IF is_fragezeichen_form -%]
   <tr><td colspan="3"><hr /></td></tr>
   <tr>
    <td style="vertical-align:top;">
     Kommentar zu:
    </td>
    <td>
     <span id="fragezeichen_text" style="font-style:italic;">[% data.supplied_strname %]</span>
    </td>
   </tr>
   <tr>
    <td></td>
    <td>
     <textarea cols="40" rows="5" name="comments">[% IF data.comments.defined %][% data.comments | html %][% END %]</textarea>
    </td>
   </tr>

   <tr><td colspan="3"><hr /></td></tr>
[% END -%]

[% IF is_fragezeichen_form -%]
   <tr>
    <td colspan="2">
     Weitere Angaben sind optional.
    </td>
   </tr>
   <tr><td colspan="3"><hr /></td></tr>
[% END -%]

   <tr>
    <td>Straﬂenname</td>
    <td><input name="strname" [% INCLUDE text_default inputname="strname" %] size="30"/>
        (ggfs. mit Bezirk oder Ortsteil)</td>
   </tr>

   <tr><td colspan="3"><hr /></td></tr>

   <tr>
    <td>Qualit‰t</td>
    <td>
     <table cellpadding="0" cellspacing="0">
[% INCLUDE colhead text="Bewertung:" %]
[% INCLUDE radiocell cat="Q" type="cat" val="Q0" text="sehr gut" %]
[% INCLUDE radiocell cat="Q" type="cat" val="Q1" text="gut" %]
[% INCLUDE radiocell cat="Q" type="cat" val="Q2" text="m‰ﬂig" %]
[% INCLUDE radiocell cat="Q" type="cat" val="Q3" text="schlecht" %]

[% INCLUDE colhead text="Beschreibung:" %]
[% INCLUDE radiocell cat="Q" type="desc" val="Asphalt" %]
[% INCLUDE radiocell cat="Q" type="desc" val="Beton" %]
[% INCLUDE radiocell cat="Q" type="desc" val="Kopfsteinpflaster" %]
[% INCLUDE radiocell cat="Q" type="desc" val="fester Sandweg" %]
[% INCLUDE radiocell cat="Q" type="desc" val="loser Sandweg" %]
[% INCLUDE radiocell cat="Q" type="desc" val="Verbundsteinpflaster" %]
      <tr>
       <td>
        <input type="radio" name="Qdesc_1" value="userdefined"
         [%- INCLUDE radio_checked inputname="Qdesc_1" val="userdefined" %] />
       </td>
       <td>
        <input name="Qdescuserdef_1" [% INCLUDE text_default inputname="Qdescuserdef_1" %]/>
       </td>
      </tr>
     </table>
    </td>
    [% PROCESS range cat="Q" %]
   </tr>

   <tr><td colspan="3"><hr /></td></tr>

   <tr>
    <td>Sonstige<br/>Behinderungen</td>
    <td>
     <table cellpadding="0" cellspacing="0">
[% INCLUDE colhead text="Eingeschr‰nkte Geschwindigkeit:" %]
[% INCLUDE radiocell cat="qq" type="cat" val="q0" text="30 km/h oder mehr mˆglich" %]
[% INCLUDE radiocell cat="qq" type="cat" val="q1" text="bis 25 km/h" %]
[% INCLUDE radiocell cat="qq" type="cat" val="q2" text="bis 18 km/h" %]
[% INCLUDE radiocell cat="qq" type="cat" val="q3" text="bis 13 km/h" %]
[% INCLUDE radiocell cat="qq" type="cat" val="q4" text="Schrittgeschwindigkeit" %]
[% INCLUDE colhead text="Grund:" %]
[% INCLUDE radiocell cat="qq" type="desc" val="viele Fuﬂg‰nger" %]
[% INCLUDE radiocell cat="qq" type="desc" val="Fuﬂg‰ngerzone" %]
[% INCLUDE radiocell cat="qq" type="desc" val="kurvenreich" %]
      <tr>
       <td>
        <input type="radio" name="qqdesc_1" value="userdefined"
         [%- INCLUDE radio_checked inputname="qqdesc_1" val="userdefined" %] />
       </td>
       <td>
        <input name="qqdescuserdef_1" [% INCLUDE text_default inputname="qqdescuserdef_1" %]/>
       </td>
      </tr>
     </table>
    </td>
    [% PROCESS range cat="qq" %]
   </tr>

   <tr><td colspan="3"><hr /></td></tr>

   <tr>
    <td>Besondere Anlagen<br/>f¸r Radfahrer</td>
    <td>
     <table cellpadding="0" cellspacing="0">
[% INCLUDE radiocell cat="RW" type="cat" val="RW0" text="keine" %]
[% INCLUDE radiocell cat="RW" type="cat" val="RW1" text="Radweg" %]
[% INCLUDE radiocell cat="RW" type="cat" val="RW4" text="Radstreifen" %]
[% INCLUDE radiocell cat="RW" type="cat" val="RW7" text="Fahrradstraﬂe" %]
[% INCLUDE radiocell cat="RW" type="cat" val="RW5" text="Busspur" %]
[% INCLUDE radiocell cat="RW" type="cat" val="RW6" text="Spielstraﬂe" %]
[% INCLUDE radiocell cat="RW" type="cat" val="NN" text="Kein Autoverkehr" %]
[%# INCLUDE radiocell cat="RW" type="cat" val="RW30" text="Tempo-30-Zone" %]
      <tr>
       <td>
        <input type="radio" name="RWcat_1" value="userdefined"
         [%- INCLUDE radio_checked inputname="RWcat_1" val="userdefined" %] /></td>
       <td><input name="RWdescuserdef_1" [% INCLUDE text_default inputname="RWdescuserdef_1" %] /></td>
      </tr>
     </table>
    </td>
    [% PROCESS range cat="RW" %]
   </tr>

   <tr><td colspan="3"><hr /></td></tr>
   <tr>
    <td>Gesperrt</td>
    <td>
     <table cellpadding="0" cellspacing="0">
[% INCLUDE radiocell cat="sperre" type="cat" val="" text="offen f¸r Radfahrer" %]
[% INCLUDE radiocell cat="sperre" type="cat" val="1" text="Einbahnstraﬂe in Richtung" entryname="sperre_oneway" %]
[% INCLUDE radiocell cat="sperre" type="cat" val="BNP" text="Dr‰ngelgitter/Schranke an der Kreuzung" entryname="sperre_BNP" %]
[% INCLUDE radiocell cat="sperre" type="cat" val="0" text="Treppe, Rad muss getragen werden" entryname="sperre_carry" %]
[% INCLUDE radiocell cat="sperre" type="cat" val="2" text="Straﬂe vollkommen gesperrt f¸r Radfahrer" %]
     </table>
    </td>
   </tr>

[% IF !is_fragezeichen_form -%]
   <tr><td colspan="3"><hr /></td></tr>
   <tr>
    <td>Sonstige<br/>Anmerkungen</td>
    <td><textarea cols="40" rows="5" name="comments">[% IF data.comments.defined %][% data.comments | html %][% END %]</textarea></td>
   </tr>
[% END -%]

   <tr><td colspan="3"><hr /></td></tr>

   <tr>
    <td>Dein Name</td>
    <td><input name="author" [% INCLUDE text_default inputname="author" %] size="30"></td>
   </tr>
   <tr>
    <td>Deine E-Mail<br>(f¸r R¸ckfragen bitte angeben)</td>
    <td><input name="email" [% INCLUDE text_default inputname="email" %] size="30"></td>
   </tr>

   <tr>
    <td></td>
    <td><input type="submit" onclick="return check()" value="Abschicken"></td>
   </tr>

   <tr>
    <td colspan="3">Die Daten werden manuell in die BBBike-Datenbank eingetragen.</td>
   </tr>
  </table>
 </form>

 <table width="100%">
  <tr><td style="padding-top:3px"></td></tr>
  <tr>
   <td colspan="3">
      <p class="ftr">
       <a id="bbbikemail" href="mailto:slaven@rezic.de">E-Mail</a>
       [%# | <a href="help.html">Info</a> %]
       | <a id="bbbikeurl" href="[% cgidir %]/bbbike.cgi">BBBike</a>
       [%# | <a href="% BBBIKE_CGI_RELURL %/mapserver_address.cgi?[get_layers]&mapext=[mapext_esc]">Adresssuche</a> %]
<!--       | <a href="javascript:history.back()">Zur¸ck</a>-->
      </p>
   </td>
  </tr>
 </table>

</body></html>
